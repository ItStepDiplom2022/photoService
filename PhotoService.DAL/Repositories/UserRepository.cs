using Microsoft.EntityFrameworkCore;
using PhotoService.DAL.Entities;
using PhotoService.DAL.Interfaces;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Linq.Expressions;
using System.Text;
using System.Threading.Tasks;

namespace PhotoService.DAL.Repositories
{
    public class UserRepository:IUserRepository
    {
        private readonly PhotoServiceDbContext _dbContext;

        public UserRepository(PhotoServiceDbContext dbContext)
        {
            _dbContext = dbContext;
        }

        //mock
        //TODO: add connections to DB
        //List<User> _users=new List<User>
        //{
        //    new User
        //    {
        //        Email="admin@admin.com",
        //        UserName="admin",
        //        PasswordHash="$2a$11$Am8FabDqHpPhRkqfMs6opOxF9r95/YUAlDpPiLlb3I9kiKkDCTWiW",
        //        IsVerified=true,
        //        Country="Ukraine",
        //        City="Lviv",
        //        AvatarUrl="https://upload.wikimedia.org/wikipedia/commons/9/9a/Gull_portrait_ca_usa.jpg"
        //    } 
        //};

        public async Task<User> Create(User user)
        {
            user.AvatarUrl = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAYAAAB/HSuDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAO1hJREFUeNrs3T92I0eCJ+BQjzNeY0+gNNcTblDZJxBuMKkTNOYEnX0CdJtrocYaE9IJwDoBKXMtUN56pLxZS4scJlasEquKIJDxL7/vvXys0fQrsiKJBH6/jIgMAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgsW8MAQAztzwei1f+b++Ox6MhAwAUAACQTjt+bcZj8N2zcL8Yw/61PY7FwMnw51/HP9+MX+/HAwBAAQAAX3EK9qc79u8+Cf4luH92/BJ+n1Fw4/QCAAoAAObmdKd+CPbfjqG/ncG/+1QMfBi/3oWPZxYAACgAAKgi7H83/rkxLB+5GYuAn5UCAIACAIBSNM/CfhumWZNfu9OSgZ/HrzeGBABQAACQ2mIM+t+PXxtDMomhBPgp/D5bAABAAQDA5Ia7+qsx9LvDH98wQ+DH8LSXwI/BYwsBAAC4oiHwb4/Hw/H4zZHVcXs81kEZAwAAwBsMU/u747ETsIs6DsdjowwAAADga1ZCf3VlQOPXGgAAgEEbTO+fyzKBhV93AACAeWmORx+e7hILyPM6hhkeKy8BAACAupni73i+RKAPlggAAABUY5j2vQ7u9ju+PCug9VIBAAAoUxOs7XecPyug89IBAAAoQ3s89sKs44JjKI36YNNAAACALHWCv2OCIsCjBAEAADIK/tb3O6Y+tooAAAAAwd+hCAAAAEDwdygCAAAAeK02WOPvsFkgAABAtRrB31FIEQAAAMAbDHdVt8Klo6BjWJqy8tIFAAB4vT483VUVKh0lHsOMlaWXMQDE9Y0hAChKG2yu9hqPx+Nu/PPw9dfxz/fj8dzd+L9/jSG0Ll44Jyffjf//hYD7Kv84Hn8/Y/wBAAUAQPVO0/1Nn/44uA9h/udnwf6lgJ9a++zrn8dioAlKnJMh/P/78XhvKABAAQAwd+vj8bcw353U78ew//P49S7DkH9JOTAUAt+OX9sZ/57fHI8fKjq3AAAArzYEwrnt7v8w/pv7MQwvZnreu/A04+M2zG9/gN5LHwAAmJN+RoF/F55mOVgz/7KhBBmWfmxmVAjc+n0AAABqt5xByNsL/FcpBIYZAodgNgAAAEBx+lDvXf7TBoYLp/nqlmOhUmtxZDYAAABQjSbUt9b/eegn7u9SrWXA2ukFAABK1o1hWehHGfC65SNmkQAAAEVZjGG5hlC2G4sM8i4Dhk0Ea9gzYCiaWqcUAAAoQQ0b/Q1Bsh+DJWUZZmjsKigCNk4lAACQsy6UPeV/F0zxr0UTnkqckmcFDEWaJQEAAEBWSp7yPxQWm+Buf826UO5GlJYEAAAA2RiCc4lT/oc7w+vgDuucDEG61KLKUwIAAIDkgaq0Kf9D8O+cullrCi0Chp9ZYQUAAES3FvxRBCTZF6Bx6gAAgFhKCk2CP7UVAcOsm6XTBgAATGmYflzKen/Bn9qLAL/fAADAJJaFhP/h7qgN07i0CCjlqQG90wUAAFw7/Jew2d/wOD+bpHEtbSij9No6VQAAwDWsCgj/w93axqliIutCXgPKLwAA4M26kP86/9ZpIoIhXG9C/k8IUAIAAADVhf9e2CGB3PfCUAIAAABnyflOp+n+5CDnZQEeEwgAALxKro9Bs7s/uWlCvk8LUAIAAABFhn93/clZrrMBlAAAAEAx4d9df0rRhDxnAygBAACA7MP/reBCgdZKAAAAQPg/b4d/KFWOTwpQAgAAgPCfXUhpnRYqsMj09aUEAAAA4T+Ljf48v5zadCGvDQKVAAAAMMNQYso/xJHbkoBDULYBAIDwH+LfjVw5JczAELh3Ia9NNpUAAAAg/NvlHybSKwEAAICpDWE7l7XIO8GDGVtl9loEAACE/0mOrdMB//2aPHhNAgAA17TIKGh0Tgd89NrMZXPAtdMBAAAChs3+YNrXaC6P5OycDgAAKFcOwcJzx8FrFQAAmFAf7PQPXrPnlwA26AQAgIKsgkeMQYk6r10AAOC1ctjxX4CAsksATwYAAIDM5bDpn/APdZQAngwAAAAZ2wn/oAS44mEPDwAAyFAv/IMSINgUEAAAqtYK/6AEmOjYOwUAAJCHIXin3PRP+If6S4DeKQAAgPT2wj8oASIcrVMAAADprIV/UAJEOg5e8wAAkMYypN0YrHEKIIk+4Wt/Z/gBACCu4S7cbcLw79FgkNY2YQnQGX4AAIhnE6wDhrnbBTOAAACgam1w5w9IOxPIowEBACDCB/5D8Bgw4PdrQqrHgK4NPwAATCfV1P+toYdsLROVAJYCAADARNrgcX/Ay7pgKQAAAFQh1dR/d/igHH2wFAAAAHywD3b8hzlI8WQARSEAAFzJMrirB7xOqtlCO0MPAACX2/swD5whVWnYGnoAAHi7LsGH+OHuoU3/oGxr1w4AAChHqud7Lw09VCHFfgC9YQcAgPNtgnX/wNul2A/AhoAAAHCmFGt4Pc8bXEvsIQIAAJHF3vhvuGtn7S7UqQ82BAQAgCy1CT6srww7VO028jXl1pADAMDXxV6za7ou1G9YChB7U9HOsAMAwOd1wdR/YBqxHw14MOQAAPCyFDt2m/oP8xJ7KUBvyAEA4I/6YOo/MK3YTwUwywiAaP7FEACFGD4g/+fx+NdI3+/xePzlePyXoYdZ+T/H45sQb5f+4Zr2f4/HjaEHAIAnfYh7V25tyGHWYi43MgsAAABGixB3d+69IYfZa4O9AAAAILo+8gfxpSEHwtM+IGYBAABAJLHv/m8MOTBqIl9/ekMOAMCc9cEdOMA1CAAAqhb77r+N/4CXxNwQsDfcAADMURfxQ/fBcAMZXIseDDcAAHMU865ba7iBL9hHvB51hhsAgDnpgsf+AflogxlJAAAwiZh321rDDbguAQBAfMvg7j/g2gQAANXbRvyQ3RhuwPUJAADiW0T8cL013MCZGtcoAAC4jj64uwbkLdYsgOGRgAvDDQBArWI9+m9nqIE3aoJHAgIAwEVWwQ7bQBliPRHg1lADAFCjXbC7NlCGNsQrLJeGGwCAmsTc/K813MAVxJoFsDHUAADUZB3pg/TBUANXEmvZ0oOhBgCgJrfBhlpAeWJtXLoy1AAA1GAZ3EUDyhRr9pInlwAAUIVNpA/QvaEGrmzYv+Qh0jVsYbgBAChdrCm0jaEGJrANljABAMBXxZr+b/os4DoGAAAJxZr+bwMtYEqxNjK1DAAAgGLFmP7v0X/A1LpgGQAAAHxWrGmzG0MNTCzWZoCWAQAAUKRY0/8bQw1EEGszQMsAAAAoTozp/7eGGYhkFSwDAACAP2gifVBeG2ogohjF5tYwAwBQknUwVRaoT4ylTQ+GGQCAkuyCzbKA+sTa3LQ11AAAlMI6WaBWMZYBeLoJAGf7kyEAElhF+j4/GmoggRjXntYwAwBQghhrZE3/B1KJtQzAHicAnMUMACCFNsL3+GCYgUTujsd9JddSABQAAG823LFaRvg+pv8DKd1E+B7fG2YAFABAztoI3yPW3TeAz/mpkuspAAoAgDd7F+F73BhmILEY16FmPABAAQBkqY3wPX4yzEBij5FKgKWhBkABAOQoxvr/WB+6Ab4mRhn5zjADoAAAchTjTpXwD+QixvWoNcwAKACAHMX4oOrxf0Auhg1JHyf+HpYAAKAAALJkA0BgbmJck1rDDIACAMhNjPX/d4YZyEiMWUlmAQCgAACy0oSnTQCndGOYgczEuC59Z5gBUAAAOYlxh+pnwwxkJsasJDMAAFAAALMrAG4MM5Chqa9NCgAAFABAVmwACMxVjH0AWsMMgAIAyEUz8d9v8z8gVzGuT41hBkABACgAAOovAGwECIACAMhCG+F72AAQyNV9eHpM6ZTsAwCAAgDIQhPhe5gBAORs6mtUY4gBUAAACgCA9KbeCFABAIACAMjC1E8AuA/TT68FuPQ6NbXWMAOgAABSW1TwwRog9+vUwjADoAAAUpt6c6oPhhjI3E0F11oAFAAAXxTjjpTp/0AJ7if++/9siAFQAAApxbgjZQNAQAFgBgAACgAgsRgzAO4NM1CAqctKewAAoAAAkopxR0oBAJTg1wqutwAoAACSMf0fcL0CAAUAkIHvJv77bQAIlCLG9ao1zAAoAIBUpl6Tem+IgUKYAQCAAgBQAFzgF0MMFCLGDAAbAQKgAACSsSkVQLwSwDUXAAUAUK0bQwAUxDIAABQAAAAAgAIAKJOpqAAfm3oJwDtDDIACAEghxmZUN4YZKMjPhgAABQAAAACgAAAAAAAUAECePI8a4GNT7wHQGGIAFABAClNvAnhjiIHCTP0YQAUAAAoAAAAAUAAAAAAACgAAAABAAQAAAAAoAAAAAAAFAAAAAKAAAAAAABQAAAAAgAIAAAAAUAAAAACAAgAAAABQAAAAAAAKAAAAAEABAMzD3cR/f2uIgcIsJ/77Hw0xAAoAIAUfRAE+tpj4778zxAAoAAAAAEABAAAAACgAAPK1NARAQb41BAAoAIAa3UT4HgvDDBSkmfjvtwcAAAoAAIAZ+NUQAKAAAGplCQDgmgUACgAgA1NPR7UEACjJ1Nese0MMgAIASOVx4r//z4YYEP4VAAAoAID6mU4LuF4BgAIAyMCHif9+SwAAfndjCABQAAC1ckcNKEVrCABQAAA1i/FMarMAgBJMvWfJvSEGQAEApPQY4XuYBQCUYOprlQIAAAUAkFSMGQCNYQYKMPW1SgEAgAIASCrGDAAFAKAACOEXQwyAAgBIbepZAO8MMZC5GEuV7g0zAAoAILWpZwE0hhjIXIzrlAIAAAUAkNwHBQAwczFmANwYZgAUAEBqMfYBaA0zkLGplyo9GmIAFABADmI8CcCjAIGcNRVcZwFQAABk8cH0W8MMZGqhAABAAQDMxWOYfnpqa5iBTMWYoeQRgAAoAIBsTH13yhIAIFdtBddYABQAAK/2IcL3aA0zkKF3Eb6HAgAABQCQjfsI38MsACBHU1+bhuurpwAAoAAAshHj7tQ7wwxkGP4XFVxfAVAAAGT1AbU1zECGBcDUfjbMACgAgNzcTPz3L4JlAEBeYsxMujHMACgAgNzYCBCYmxjXJEsAAFAAANmxDwAwJ8OMpCbCddUGgAAoAIDs3ET4Hq1hBjIR43rk7j8ACgAgS8NdqvuJv4d9AIBcxJiR9MEwA6AAAHJ1E+F7rAwzkIG2kmsqAAoAgDeJcbfqe8MMJDYUkYuJv8d9mH5WFQAKAIA3u4nwPZYRPngDfInH/wGgAABm7z7EuWNlGQCQUoxrkPX/ACgAgOzdRPgelgEAqcR4/F+saykAAFxkuDP2W4TDMgAghT7C9e1gmAE4lxkAQAo3EYsGgNhizED60TADoAAASvAYLAMA6tSEpyUAU7P+HwCAYqyDZQBAfTaRrm0AcDYzAIBUbiJ9H8sAgJhiXHNM/wcAoDjDJlZT3yXbGWYgkmWIc/e/M9QAAJQm1lTZxlADEWxd0wAA4GVtpA/La0MNRPAQ4Xp2a5gBAPCB2fOygXS6oNAEAIAvijVltjXUwIT2wfR/AAD4olWkD81bQw1MpIl0HTP9HwCA4sVYBjAcC0MNTCDWhqam/wMA4MPzK4/eUAMTiFViNoYaAIDSxXp2ts0AgWvrIl2/doYaAIBaHCJ9iO4MNXBFt65dAABwnnWkD9F7Qw1cSRvpujUsMbCHCQAA1WgifZD2SEDgWmI9+s9TTAAAqM7Oh2mgEE1QWgIAwJt1ET9QN4YbuMA22LwUAAAuEutxWmYBAG/VhHhl5dpwAwBQqz6YBQDkLdbd/+Gw+R8AANVqIn6wNgsAcI0CAICEYm0GaBYAcK6Yd/+XhhsAgNq1wR02ID9NxGvT3nADADAXh2AWAJCXmHf/O8MNAMBcdBE/aO8MN/AVTcRrkkf/AQAwO7EeCTgcreEGvmAfPPoPAAAm0wfrbYH02ojXoqH49Og/AABmZxHizgLoDDnwgtuI16HecAMAMFd9iLvu1p034Lku4jXoN9cgAADmbBH5w3dvyIFn15+Ys5A8lhQAgNmL+eit4cN+Y8iBo02IW0C69gAAMHtN5A/hHgsILCNfd9z9BwCAUcxZAMOxMuQwazE3/nP3HwAAnom9FteGgDBf6+DuPwAAJNVH/lC+MeQwO02IWzYO30vZCAAAn4g9C2A4WsMOs7IPnjwCAABZ6CN/OLcUAOZjFfn64u4/AAB8wWIM5ZYCANe+tsSeYbQ27AAA8GVd5A/plgJA/WJP/T8YcgAAeJ3Yj+iyFADqFXvXf48aBQCAM7QJPrB7VBfUZxniT/3fG3YAADjPNrhrB1zmNsF1ZGnYAQDgPE2If+fuYfy+QPk2CcK/TUUBAOCN+gQf4G8NOxRvleDa4bF/AABwodiPBXQXD8rWhPizh4ajM/QAAHCZNsEHeR/moUzDHfgU6/5t/AcAAFeSYkPA4Q6izbzAteI1R2PoAQDgOhYhzZTeQ7CmF0rRJQr/vaEHAIDrSrGpl6m9UIZlouuDTUMBAGAiu0Qf8m0KCPlqQpoZQr8Fy4QAAGAyqZYC2BQQ8r0m3AZT/wEAoEqplgIMR2v4ISv7YOo/AABULdVSAE8GgHyk2vHf1H8AAIgo5VKAh+DJAJBanzD894YfAADiahMGgFslACTTJXzteyoIAAAkslECgPAf4s3+aZwCAABIJ9UO4O4GQlzLhK/14Vg5BQAAkFYT0u0HMBxbpwCihP+Ur/ONUwAAAHlI+WhAJQDUHf4t9wEAgMyk3A9ACQB1hn/r/gEAIFMp9wNQAkBd4d+6fwAAyNgig8CgBIA6wr91/wAAkLk2cWhQAkD54d8TPgAAoBBdBiWAjcPgba/d1OH/4LULAABl2SoBoLjwn/o1O5QPS6cCAADKk3pTwFMJ0DgVkH34t+kfAAAUbJFJCeCuInxeDrN1hmPtVAAAQNly2FDsVAK4uwi/W2QU/m3cCQAAFZUAv2VydE4HZDM7Zzh2TgcAANSly6gEcLeROctlVo6NOgEAQAkQ7TnjggdzfA0K/wAAQBSbjEqA4XnjNgfEa8/GnAAAwERy2XjsFEQ6p4SKDXfZ98I/AACgBPh9XwDTkalNG/KZ8i/8AwCAEiCb41Y4oSJ9Zq8v4R8AAJQA2YWUtdNCwXKb8n86WqcGAADI5Xnknz6b3JIASrMKeU35Px2dUwMAAISQ7x3LhzFQQQmvoW2GryHhHwAAeFGuAWYTzAYgX214eqSlAg0AAFACXOE4BGuYyctQSm0yfb3Y8A8AACi6BLA3ALkY7qwfgvAPAAAoASYPOJ1TRAJNeCqhcn5tCP8AAMDZ+oyDznDshR0ivx4eMn49HLweAACAS3SZlwA2CWRqbch3uv/puPUaAAAArlUC5Hzn8zT1ee1UcUVNyPPxmC/NhBH+AQCAq1kWUAKcpkF79BmXyHl3/0+PrdMFAABMoQlPU41LCEbDXdHWKePM4N+HMoqu38afFQAAYNKQVMK0aEUAtQZ/T8EAAACiyvkxgYoAagz+HvMHAAAk0xVWAigCKDX42+kfAABIrpTNAV8qAmwWOC9NocHfZn8AAEA2StsX4NOnBnTBndWaLUN5S1as9wcAALJWyqPTPhe0hp+/cRqrMQTnfcG/k4dgvT8AAJCxVShzivWnywM6p7JITXgqckr/HdwFs1IAAIBCQljJd16fzwoYpo67C5u3ISh3Ff3OrZ1SAACgNH0Fgez5dOx1sEQgJ8Nsk21Fv2PDLv/KJgAAoFjLMTz/FuoKasqAtKH/obLfqWHZgin/AABA8Rah7A0Cv1YG9MGd2yl/d7pKQ/9pZknrNAMAALVpKw1xz8PcEFRXwd3cSwxlyjDDYl/x74qN/gAAgOotQl3rtr82O2CjEHh14N9VXhA93+hv5bQDAABz0Yb69gZ4bSHQhXnvHzCc+35Ggd9afwCI4BtDAJC1IQj9Lcz3sWePx+PueHw4Hvfjn+8qO7/LMfB/O/55rnslDOf3h+Nx42UPAAoAgDkbQuEm2Azt5G4sB07FwPMjR+2zr39+FvTd6X7y9/A04wEAUAAAMOqCKdJfcyoChoLg5/G/nWYSfFogXOJ5gD/dyQ/PAv7z4M/LbsLTXf97QwEAAPBHNT8y0DGPw6P9AAAAzjDcZa79MXCO+nb37710AQAA3qYN83tagMPu/gAAALPVKQIcGR7bMO9HOgIAAExiuMPah/k9O96R3zEsT2m9JAEAABQBDsEfAAAARYBD8AcAAOCtRYA9AhzXPnaCPwAAQJ46RYAj2NwPAABgNtrwNG1bmHW89hiWkvSCPwAAQJmGMLcN9glwfP64DU8zRwAAAKjAIlge4PjjNP/WSwMAAKBey2BWwJzv9q/HQggAAICZOM0KsFdA/Wv7N2PxAwAAwMw14enO8K3AXE3oH2Z5rPxqAwAAoAwQ+gEAAOCjMsAyAaEfAMjYN4YAgCtajEHz3fjVRnJp3B2Pn47Hj+OfAQAUAABMathUrj0e3wePk5vS/fG4GUP/8PXRkAAACgAAUmrH491YDpgh8DZ34/FhDPz3hgQAUAAAkLPleLx79mc+9vhJ2L8L7vADAAoAACrQjkXAt89KgbnMFBjC/f3x+Dn8fpf/3q8EAKAAAGAuFp+UAe+e/bfS3D87fnkW8m3WBwAoAADgK9rx66kg+POzciBWUfD4LMQPf/55/PNpyv4p9AMAKAAAIJL2yoEfAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD41DeGAKB4i+OxHP/8eDzuDAmVWY6/5yc3hgQAAJiL1fHYHo/D8fjtheP2ePTHozFUFKo7HrvP/H4//x1fGioAAKDW0P/whVD00rEJH989hdx/zw9n/o4/jK+Nzu86AABQosUYaN4S+j89hkDVGlIy/33fXfh7bnYAAABQXOi/VhD69OgNMRlqw+Ull9kBAADA7EP/S3dH3Rkll9/9TaTf+9OxPx7rYH8MAACg0tBvNgC5ecta/2sfh7GAaJ0OAACgttBvbwByeB3k9BqwVAAAAKg29L90bIUeIliH6db6X/vYja/dxmkDAAC+5PTIvt8KOh7GgAbX1oantfe/FXrcBvsGAAAAL4T+Uu5wfinstE4nV7AI5RVhr3l9DPsG2EgTAABmZllJ6P/cFOjGKeaNwb+v9HXx0iaCygAAAKhUM37oT72DeaxjE+wPwOt1M3ptKAMAAKDS0D+sAb6dYbA57Q/QKwL4ghwe66cMAAAA3qSUHfwVAaTUhrI3+FMGAADAjNWymZ8igKlfJ4L/+WXA8Lpp/PoAAEA6wwfyOa3rv3YRINDMR+d14tGCAABQmtMU/7mu67/2sRVmqn6t9IL/pE/c6IIZNQAAcHWnKf6CxzTHfhxjytcEy2FSFGlePwAAcGGQ6YM7mNY78xpdsL7f5oEAACDIOMLbpji7q5l/STYETnf7890vwBIBAAAQZIraNNBdzXwsxmBpHwxLBAAAoChdcLffFGdeE/qH18rO76AlNgAAUJImuNuvDOA1r5O10F/9UwQAAKBKw4ddd/vrXSawDR6Ldql2LFVM75/fEpvGrz8AL/nGEAAFacZQ+FfBcFbujsfN8fhp/MrLlmPofzd+9RqZtx+Px3+MXwFAAQAUox1Dv42v/hiMh1B8fzz+FuZz1+9UCHwY/3w/49fFcHw3s8D/9+Pxfvw3fx+UHV9zPxYB/zgej4YDAIAcnTYqG9aGm9r7x8eBNS+M1ybMd/+AYTlIH55KoqbC10I7nvdtmO+U/uHfvfxCGWK5w+ueINB6ewGYLzMAgNwM4e2vwfrv54a73KepvPdf+d+egpDN9J5mCQzj9cs4ho8h7yUEzXgM5+7b8WsTrOcezttw1/8fZ4zjUAS9C2YNfema8s/wNJMCAAUAQHRtMM3/raH/JX2wV8LXyoHTOP/6yX8LzwqDa1g+Ow/PA/13438X8j9v+P3/9/D2ZR6n2RPfj9cWr4eP3QfLAwAUAAARdWNQdcf68tD/qSFU/i14PNgUxcHnxluQv14w/SFcf8bGcJ35t1DnUpFLvQ9PMy3uDQUAANc03IXrw9Mjq6zpf3lN/zW1wdpoRzmPsVtHug414/fy2vj42Af7BAAAcKUP3FvB/783rUvxrO4u2FTRke+xCemm6J82Hd05Dx8VAZ23LQAAzrUcg7/Qn36pg9kXjtyOXchrOv7zMsDr5OnapQgAAOCr2vB0F2nO05lzfezWnB8b6DDV/ByrYObSqQjog40UAQB44QPznIP/NpTzNIMmmJ3hEPyVAecVm4oAAABmvcZ8N/77S/1QrAhwCP7KAEUAAACCf0i3g78iwCH4KwMUAQAACP6JPuzmsJnf1GwW6LjGrJh2ZtfEOT9NQBEAACD4VxVmVjM818OH+XXw+EDHeRtfNi6T/78M2AdFAAAAgn8xU/x9kH0y980dHXaIf6tmvJbczqwI6Jx6AADB3xT/8sOMx6I55jwz5hLL8Rozl9fPQREAAFCGNsznju/Oh9SznaY4z+mupuMp0G2Caf7XcNo80GaQAAAI/iHOtGVB5nLNGArtFVDvsQ3u9ivTrlMEuOYCAGQS4uZwN8q05WnN/fnotYW1LljbH9Nclghs/F4BAKRxeuSbu/0oAxynzS+9VtLrQt2zsR7G3zUAACJZVx7O3O1XBjhe9zoR+vM1nJeaZwUMpVPrNAMATGf4sFXreu3Tc6iFmXydpjnbQDDda+S0pt807LJ0od5ZATvXbQCA62oq/vB4Wq9Meb+T3RhIbSI47etjHTzisqbXTY2zAiwLAAC4gprX+W+FmqosxwCgELg88A+v+davVPXX9qFAq202jWUBAABvNHw4rO0u0WlTP9OX69eEp6nqmzCPx1O+9fWwDe7wz10b6nuSi6cFAACcEZxqC0ym+RPGkNs9KwXmtLHg7bOw3wpHfObaX9PygKHgspkrwBV8YwigWv3x+FtF/573x+M/jseNU8tnLMZiYDn++d2z/1aax+Nxdzzuj8cv4+/96b/BOa+J1fhe0FTw7/nxePwwvhYAUAAA4fcpoDV82Hscg/8/xyAEl5YDzwuB78Lvd8/biD/L3bMA82H8ej8eQj5T6Y7Hv4Xy19U/jiXAj04pgAIA5h5wNqGO6fFDEBru9v8juNNDurLgJU34fLl284Xf53vDSiaGAuCvofwp9WYDAACzNXyQq2Gt5yFY3w8QQxPK3zDwIXhSAAAwI8Odyl2wsR8A8y0CPCkAAKheDXf9h+DfOpUAyQ0Bui/4fWV4OoZHYAIAVX5IK/2uv+APoAiY4lg7hQBALYbQfBD8AVAEfPbYBUsCAIDC9YI/AAmKgE0oc1NZSwIAgOI04Wlto+APQMr3ohI3C7QkAAAoRhfKnH4p+APUWwSUtg/NUFxYEgAAZGsRyrzTIvgDzEM7XvNLekpA47QBALlpQnlT/oe1lp1TBzA7q1DO5rQPQUkNAGT2QaqkKf8Pgj8A4WmtfSnvX963AIDk+sKC//DzWlMJwElJy9e2ThcAkOoDU0kbKg0fmhqnDYDPGB6/V8L+ALugyAYAIn9IKmW9/z54pjIAr9eF/JcF3CoBAIAY2lDGekkb/AHwVkO43igBAIA560IZd/17H4oAuII25D3jbSi7zXIDAK4u9zshp+n+jVMFwJX1Ie8NbpUAAMDV5L478vDhZ+U0ATChJuS7SaASAAC42DCNPvfN/jbBdH8A4lmHPPfCUQIAANWG/2HdY+s0AZBAk+l7pBIAADhb7o/5650iADLQZ1oCNE4NAPDa8J/rY/5ugzsbAOT3vplbae4RgQBA0eG/d3oAyNQQtnPbMFcJAAAUF/494xiAUqwyey9VAgAAxYR/O/wDUJom5LUkYOuUAAA5h//h51k5NQAULKclAUoAACDL8L8P7voDUIcuo/fZtdMBAMK/jf4AYNr320Mm77Od0wEA87PI6MPIacp/67QAUPH7bg77AjwEG+sCgA8hwQ7FADC1HPYFGEqAxqkAAOHfpkQAMK0+KN8BgAhy2pG4czoAmKkug/fhndMAAPXahHzW+1t/CIASwOa7AEClHzJOUw4bpwMAsnl/XjkNAFCPNpPwvw/WGwJAbiWAmXkAUIlmfGO32R8AKAFsCggAlcplx//eqQCAr0q9UW9tZX0TnmZBPj8av2YA+CBhp38A8N4dwrqC0D9senz4wr/xMP5vlAEAVGMt/ANAkVLP3itxP4BFeNvTjnq/bgCUbin8A0CxUi/hO4Sy9gO4dLzsfwBA0R8aDsI/ABRtKPNTbuK7m1lZogQAoEg74R8AqtAG+wHECP9KAACK1An/AOC9/UrHMAMh1/0AplomoQQAoAhNSDtVUPgHgGmkfDJAjoF46j0SlAAAZG8v/ANAtVJuCriZUfhXAgCQvZSP/BP+ASBO8E050281o/CvBAAgW03CDwRbww8A0bQh7X4AKcNwqkcjKgEAyEqqqf/CPwDEl3LWX6pHA6YK/0oAALLSJXwjBADSSPnI325m4V8JAEAWUq0FPHgDBIDknwEOId1SgGZm4V8JAEByKR4JlPPzgAFgTpYJg/B+huFfCQBAMm2w4z8AzF3K/QDWMwz/SgAAkkix8d/GsAOAzwRh2qUAuYd/JQAAUXXBpn8AwO+BOdXjgHcT/FtKCP9KAACivcnH3vQn9XN/AYAvaxOG4NVMw78SAIDJ9QW/sQMA09mEdEsBLg3ApYZ/JQAAk0kxxc+6fwAoR6oQvZ1x+FcCADCJ2M2+NzIAKEvKRwO2Mw7/PjsBcFVNgjexpWEHgOKkejTgYebhXwkAwNVsI7959YYcAIqV6tGAr/38UGv4VwIAcLEm5N3gAwD5fXZI8WjAh/F7zzn8KwEAuEjsu/+tIQeA4qVaCrAT/pUAALxNE8rZxRcAyEuqpQCt8K8EAOB8fSjrOb4AQD6akGYpwEH4VwIAcJ5F5DftzpADQHVSLQXohX8lAAB5vmHfGm4AqFaKpQCnDQGFfyUAAK9wCDb+AwAu14R0TwXIIXh346EEACBLMd+k9oYbAKqXailADuE/xecrJQAArxZzql5juAHA54vKw78SAIAsNcFj/wCA61vOPPwrAQDIzja4+w8ATKOfefhXAgCQjZiP/nP3HwDmKeZGwzmGfyUAAFmI+UbUGG4AmKVW+FcCAJBerM153P0HgHmLueQw1/CvBAAgmSa4+w8AxBFz2WHO4V8JAEASfaQ3lr2hBgCO1sK/EgCANGJtyNMaagBgFGv5Ye7hXwkAQDSxnst7MNQAwDOt8K8EACCuTQVvlgBAmUrbEDDG5xklAACTiTH9/8EbCADwgpI2BOwijosSAICrizX936P/AIDPKWFDwC7BuCgBALiqWNP/l4YaAPiCWBsSl7aMUQkAQFFvtreGGQD4ilb4VwIAMJ1Y0//XhhoAeIXcHgvYZTQ2SgAALtJHeqPwJgEAvEasmxOlPr1ICQDAm91GeIPYGWYA4BUWkT6blP7oYiUAAG96k537GygAIPyX+NlFCQBAlm8c3hQAAOFfCQBAQttg+j8AIPyXPGtRCQDAqzx4IwUAhP/iP7MoAQD4olg77HoTAACEfyUAAAmtI7wB7A0zACD8KwEASGsX4eK/NswAgPCvBAAgrRjr/xvDDAAI/0oAANKJsf7/YJgBAOFfCaAEAEgrxvr/jWEGAIR/JYASACCtGOv/V4YZABD+lQBKAIC0Yqz/d4EHAIR/JYASACChJtLFHQAQ/oV/JYASAKDyi7/1/wAg/Av/SgAlAEBim2D9PwAg/CsBlAAA1YvxhuxiDgDCv/CvBFACACRm/T8AIPyjBACoXBus/wcAhH+UAADVW3vTBQCEf5QAAPXbRrh4N4YZAIR/4V8JoAQASGs/8UX7wRADgPAv/CsBlAAA6U19wd4bYgAQ/oV/JYASACCtZYSLdW+YAUD4F/6VAMGTpQCSWkW4UK8MMwAI/8K/EiC4uQSQVB9sAAgACP+UVQL4fAnwBjYABABqCP/DZ46lUzKbEmDjNACc7xBsAAgAlB3+lQDzKwEOTgHA+azRAgBqCP9KgPmVAM4zwBnaYC0eAFBP+FcCzKsEaA0/OfiTIaAQTYTvcW+YAaCq8L8vIFyX8nPW4P3x+CHR93Z+UQBAZgXAjWEGAOHfz8tE5xiAV9oFm7MAAK8LWrlP+7ccII0uWAIAUISpHwHoCQAAIPwrAYR/mwACZMATAACA2sO/EqDO8P/gFACc94buCQAAwBzCvxKgrvA/HFunAeD12mBdFgAwn/CvBKgn/A9H41QA5HXxtjMrAAj/SgCfH699bJwKgPP0wbosAGB+4V8JUHb4vw1uMgGcbepHAHoCAAAI/0oA4d/5AsjA1I8A3BliABD+lQDCv/MEkN5D8AhAAGDe4V+4FP4BZsEjAAEA4V/IFP4BKrcMHgEIAMJ/PuG/D9PPThQ2hX+AWWqDZ7MCgPCfR8jrxp9pqQQQ/p0HgDIv7ACA8H/ukkElgPAv/ANcWT/xRftgiAFA+A9v2y9ICSD8C/8AV7SZ+MK9N8QAIPyHt28WrAQQ/gG4kv3EF++tIQYA4T9c9qQgJYDwD0ABBUBviAFA+A+XPyZYCSD8A3ChqS/ia0MMAML/heFfCSD8A1BAAdAaYgAQ/q8Q/pUAwj8AF2gUAAAg/BcU/pUAwj8Ab9RGuKADAML/NcO/EkD4B0ABAADMJPwrAYR/AM7UT3xRPxhiABD+J/63KgGEfwAyKAD2hhgAhP8IlADCPwBfsVEAAIDwX3j4VwII/wC8wn7iC/zGEAOA8K8EEP6Ff4D6C4DeEAOA8K8EEP6Ff4D0pv6goAAAAOFfCSD8C/8AGZj6Yt8aYgAQ/pUAScKv8A+AAgAAhP/qw//cSwDhHwAFAAAI/7MJ/3MtAYR/AP6gjXDhBwCEfyVAvFAs/AOgAAAA4X+24X8uJYDwD4ACAACE/9mH/9pLAOEfgC9aT/wGcGuIAUD4VwJMHpaFfwC+qp/4TWBviAFA+FcCTBqahX8AFAAAIPwL/5WXAMI/ANkUAFtDDADCvxJgkhAt/ANwlv3Ebwi9IQYA4V8JcPUwLfwDoAAAAOFf+K+8BBD+AVAAAIDwL/xXXgII/wBkWwB0hhgAhH8lwFVCtvAPwEWmfoNoDTEACP9KgIvDtvAPgAIAAIR/4X8GJYDwD4ACAACEf+F/BiWA8A9A9gVAY4gBQPhXAgj/AKTVRHjDAACEfyWA8A9AYq0CAACEf+FfCSD8AygAFAAAIPwzzxJA+AdQACgAAED4VwJUXgII/wAKgLOPW0MMAMK/EkD4ByC9buI3kL0hBgDhXwkg/AOQXq8AAADhHyWA8A/X9SdDAAAw2/C/zyRc/XA83jslV3V3PP5yPB4L/jc8jv+GO6cTFAAAAAj/1FkCCP+gAICrvRkCgPAv/CsBhH9QAEDlfjUEAAj/wr8SQPgHIL3hg8mUm8n0hhiAmYZ/G/7NW+4bA9rwD0ABoAAAAOGfyksA4R9AAaAAAADhn8pLAOEfIrEHAABA3eHfmn8+Nayv/2cmP4s1/wAzN/UMgJUhBmAm4d+df17SBXf+AZhJAdAaYgCEf+Ff+Bf+AUjvoAAAAOEf4R+A+k39pqMAAED4F/6Ff+EfAAUAAAj/wr/wL/wDoAAAAOFf+Bf+hX8AFAAAIPwj/Av/AORRACwMMQDCv/Av/Av/ANRfAACA8C/8C//CPwAKAAAQ/oV/4V/4B2BqrQIAAIR/hH8AFAAKAACEf+Ef4R8ABYACAADhX/gX/oV/ABQACgAAhH/hX/gX/gFQAACA8C/8C//CPwB1FAC3hhgA4V/4F/6FfwDqLwD2hhgA4V/4F/6FfwAUAAAg/Av/wr/wD0AEKwUAAMK/8I/wD0D9egUAAMK/8I/wD4ACQAEAgPAv/Av/wj8ACgAFAADCv/Av/Av/ACgAFAAACP/Cv/Av/AOgAAAA4R/hX/gHoI4CYGeIARD+hX/hX/gHoP4CoDfEAAj/wr/wL/zDHP3JEAAARA//+0zC1Q/H471TklX432bwczwej78cjzunBBQAAAAI/wj/AHCRTbAEAIB6w79p/3wu/Jv2D8Ds7BUAAAj/wr/wL/wDoABQAAAg/Av/wr/wD4ACQAEAgPAv/Av/wj8ACgAFAADCP8K/8A+AAgAAhH+EfwBQAACA8I/wDwCFFACtIQZA+Ef4BwAFAAAI/wj/AKAAAADhH+EfABQAAAj/wj/CPwC8ytRvgAoAAIR/hH8AUAAAgPCP8A8ACgAAEP4R/gFAAQCA8C/8C//CP5CrbwwBGRYAAMDX/XA83huGrML/NoOf4/F4/OV43DklwKf+ZAgAAIR/hH9AAQAAgPCP8A8oAAAAEP6Ff+EfUAAAACD8C//CP6AAgE80hgAAhH/hX/gHFAAoAABA+Ef4F/4BBQAAgPCP8A+gAAAAEP4R/gEFAAAAwj/CP6AAAABA+Bf+hX9AAQAAgPAv/Av/gAIAAADhX/gX/gEFAACA8C/8C//CPzC1bwwBGVkcjwfDAIDwj/Av/APXZwYAORne6O4NAwDCP8K/8A9c378YAjLzP45HaxgAEP4R/gGuyxIActMcj4NhAKByN2PIQ/gX/oFozAAgN8Mb31BMtYYCgIo14/GToRD+hX8gFjMAyNXt8VgaBgAq9z48LQVA+Bf+gcnZBJBceRMEQABF+Ae4IjMAyNnwWMB9MBMAgPq9D2YCCP8AE7MHADn7r+Pxv8JTUTWUAP9qSACo1PA+1wR7Agj/AAoAZu5mLAL+9/h//09DAoASAOEf4DyWAFCy1hAA8Magvcn453sfLAcQ/gEAALjYEAJ/y/ywMeD1w38O5/Uh2NsIAAAgmocCCgAlgPAPAADABVaFhH8lgPAPAADABUqY/q8EEP4BAAC4UCnT/5UAwj8AAACFh0IlgPAPAADAhHaFFwBKAOEfAACAr1hUEP6VAMI/AAAAhYRDJYDwDwAAwIRqmP6vBBD+AQAA+IKmwvCvBBD+AQAA+MS64gJgziWA8A8AAMBHbisvAOZYAgj/AAAAfKSZQfifWwkg/AMAAPAHsab/75UAwj8AAADpHCKEwdvxe22VAMI/AAAA8S0jBcL1s++pBBD+AQAAiGwTKRQ2n3xfJYDwDwAAQEQxp/8HJYDwDwAAQHxtiD/9Xwkg/AMAABBZrPC9yOTnqK0EEP4BAAB4lYcI4XCXWRlRSwkg/AMAAPAqq0gBsTvjZ1ICCP8AAABcWS7T/5UAwj8AAAATWYQ40//fGqKVAMI/AAAABQXJ1QU/oxJA+AcAAOBCu0hB8VJKAOEfAACAN1oUFprnXgII/wAAAGQdKFdX/JnnWgII/wAAALzZPkJgPEzwc8+tBBD+AQAAeLMmUmjcTPTzz6UEEP4BAAC4yDpScJwyNNZeAgj/AAAAXOw2lDn9fy4lgPAPAADAxZpQ9vT/2ksA4R8AAICr6CMFyCbiv6mWEkD4BwAA4GoOEQLkbYJ/V+klgPAPAADA1Swjhch1on9fqSWA8A8AAMBVbUJ90/9LLwGEfwAAAK6u1un/pZYAwj8AAABXt4oUJrtM/r25lwDCPwAAAEUH4sUM/83nlgDCPwAAAJN5iBAodzMuPl5bAgj/AAAATGZu0/9zLQH2wj/8P/bu9yiNIIwD8DqTAijhSqAEUoF0EDqIJdgBJTCpQFMBpgLpADqIHSRsOKMyisHA3v55npkd9YMD98KX3/vu3QIAAKUH4BgqR43XoIQl/AMAAFRqFPI69k4TQPgHAADgDGaJwuW0kHq02gQQ/gEAACp3kyhclqS1JoDwDwAAUDnb/zUBhH8AAIAGzBKFzEmh9am9CSD8AwAANOI+QchcF16jWpsAwj8AAEAjukRBc15BrWprAgj/AAAADblKFDZrCZq1NAGEfwAAgMbY/t9eE0D4BwAAaEyXKHBeV1i7UpsAwj8AAECD5olCZ1dJveJ1xFsmboR/AAAASrJOEDrvC6/RtG+UpKiV8A8AAMDJjRMFz6vC6tKFsqf8wj8AAAAv2P7/ZNLX4z7Udcyf8A8AAMCfYHju8LnM9NpjU2IWdlP+FHUQ/gEAABjENFEAnWV0zZNQ75Rf+AcAAOBVqY6wGw14jV1oY8ov/AMAAPCmFIH4ZoDriqG3pSm/8A8AAMCbatr+P+pfZxHam/IL/wAAAByU4ni7n2d8/zHgXoe2p/zCPwAAAAeNEoXRxYnf8yyY8gv/AJn6pAQAQIamiV7n+3/+/7h/r5eC7bsetuvzdq2UAgAAgEe5bv8f9YE/TvnXwUTf5B8AAIAPy237fwyuV9u1FOQ/vCa+1gAAAOy7ShRKxwcaEKb8ZZ2yAAAAQIFSPDV/vfeapvzn2fY/8XUGAADgNV2icDoPpvznDP6xviNfZwAAAN6Savu/dfq17D8/wR8gU44BBABy8kUJihGP9bsNu6MU7/q/AdAAAAB41zg4Ki53qz7w3/a/A6ABAABwNNP//DxO+X/0P035AQp2oQQAQCbiw/g6ZRicKT9ApewAAAByMBb+B2PKD6ABAACQzFclSCpO9u+261sw5QdohlsAAIAcxLPjHR93Pg994H98Yv9GSQDaYwcAADC0qfB/Fqu90A+ABgAAwKAuleAkTPkBOMgtAADA0Gz//zhTfgD+mR0AAMCQZsL/0Z4/sX+jHABoAAAAJbD9/32bvdAPAB/iFgAAYChx8v9TGV5lyg/AydkBAAAMZaoEf22CKT8AGgAAQKVa3/5/F3YP7zPlB0ADAACoWtfY9W7Cyyf2P/gKAJCSZwAAAEP51cA1Pg/8Kx85AEOyAwAA4HQ2wZQfAA0AAIAXYjgeVXAdzwO/KT8AAADsWYbdbQClrXh04WK7ZqGOBgYAjbADAAAYSjzyblLIe42T/ccn9pvyAwAAwBHGwZQfAAAAmpDTbQD323XdNyYAAACAE5oEU34AAABowjyknfLPQznPHgAAAICqLML5pvw3YTfl75QZAAAA6mkCmPIDAABA5qbbtQ6m/AAAANCEGOYPnRBgyg8AR7pQAgAgc/shf7VdD8oCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPPktwACkYsb4BFK2eQAAAABJRU5ErkJggg==";
            var addedUser = await _dbContext.Users.AddAsync(user);
            return addedUser.Entity;
        }

        public IEnumerable<User> FindAll(Expression<Func<User, bool>> predicate)
        {
            return _dbContext.Users.AsQueryable().Where(predicate);
        }

        public User GetUser(string email)
        {
            return GetWithInclude(user => user.Email.ToLower() == email.ToLower(),
                i => i.Images, i => i.Collections, i => i.Roles).First();
            //return _dbContext.Users.FirstOrDefault(user => user.Email == email);
        }

        public User GetUserByUsername(string username)
        {
            return GetWithInclude(user => user.UserName.ToLower() == username.ToLower(),
                i => i.Images, i => i.Collections, i => i.Roles).First();
            //return _dbContext.Users.FirstOrDefault(user => user.UserName.ToLower() == username.ToLower());
        }

        public IEnumerable<User> GetUsers()
        {
            return _dbContext.Users.AsEnumerable();
        }

        public void AddRole(User user, Role role)
        {
            if(user.Roles.Any())
                user.Roles.Add(role);
            else
                user.Roles = new List<Role> { role};

            _dbContext.Users.Update(user);
        }

        public void AddCollection(User user, Collection collection)
        {
            if (user.Collections!=null&&user.Collections.Any())
                user.Collections.Add(collection);
            else
                user.Collections = new List<Collection> { collection };

            _dbContext.Users.Update(user);
        }

        public void Update(User user)
        {
            _dbContext.Users.Update(user);
        }

        public IQueryable<User> Include(params Expression<Func<User, object>>[] includeProperties)
        {
            IQueryable<User> query = _dbContext.Users;
            return includeProperties
                .Aggregate(query, (current, includeProperty) => current.Include(includeProperty));
        }

        public IEnumerable<User> GetWithInclude(params Expression<Func<User, object>>[] includeProperties)
        {
            return Include(includeProperties).ToList();
        }

        public IEnumerable<User> GetWithInclude(Func<User, bool> predicate,
                params Expression<Func<User, object>>[] includeProperties)
        {
            var query = Include(includeProperties);
            return query.Where(predicate).ToList();
        }

    }
}
